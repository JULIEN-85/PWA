(()=>{var e={};e.id=790,e.ids=[790],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},6983:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(8203),r(8385),r(5866);var s=r(3191),a=r(8716),l=r(7922),i=r.n(l),n=r(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["capture",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8203)),"C:\\Users\\julie\\Desktop\\test_PWA\\src\\app\\capture\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8385)),"C:\\Users\\julie\\Desktop\\test_PWA\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\julie\\Desktop\\test_PWA\\src\\app\\capture\\page.tsx"],u="/capture/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/capture/page",pathname:"/capture",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7694:(e,t,r)=>{Promise.resolve().then(r.bind(r,3645))},1540:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},8019:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},4022:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(6557).Z)("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]])},3645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var s=r(326),a=r(6226),l=r(434),i=r(7577),n=r(5047),o=r(6680),c=r(2237),d=r(5367),u=r(1664),m=r(9752),p=r(7525),x=r(1190),h=r(4794),f=r(4118),g=r(9280),v=r(4097),j=r(9837),b=r(6308),N=r(7546),y=r(6557);let w=(0,y.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),k=(0,y.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var C=r(4022),P=r(1540);let S=(0,y.Z)("PowerOff",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),z=(0,y.Z)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);var $=r(6333);let _=(0,y.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var A=r(1896),Z=r(8019),I=r(8091),V=r(1223);let E=(0,r(9360).j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),R=i.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,V.cn)(E({variant:t}),e),...r}));R.displayName="Alert";let D=i.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,V.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));D.displayName="AlertTitle";let M=i.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,V.cn)("text-sm [&_p]:leading-relaxed",e),...t}));M.displayName="AlertDescription";let q="photoClassProjectStudents_";function O(){let{toast:e}=(0,v.pm)();(0,n.useRouter)();let t=(0,i.useRef)(null),r=(0,i.useRef)(null),y=(0,i.useRef)(null),{stream:E,error:O,isWebcamActive:W,startWebcam:U,stopWebcam:L,capturePhoto:F,setError:G}=function({videoRef:e,canvasRef:t}){let[r,s]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[n,o]=(0,i.useState)(!1),c=(0,i.useCallback)(async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{let t=await navigator.mediaDevices.getUserMedia({video:!0});s(t),e.current&&(e.current.srcObject=t),l(null),o(!0)}catch(e){console.error("Error accessing webcam:",e),e instanceof Error?l(`Error accessing webcam: ${e.message}. Please ensure permissions are granted.`):l("An unknown error occurred while accessing the webcam."),o(!1)}else l("Webcam access is not supported by this browser."),o(!1)},[e]),d=(0,i.useCallback)(()=>{r&&(r.getTracks().forEach(e=>e.stop()),s(null),o(!1),e.current&&(e.current.srcObject=null))},[r,e]),u=(0,i.useCallback)(()=>{if(e.current&&t.current&&r){let r=e.current,s=t.current;s.width=r.videoWidth,s.height=r.videoHeight;let a=s.getContext("2d");if(a)return a.drawImage(r,0,0,s.width,s.height),s.toDataURL("image/jpeg")}return null},[e,t,r]);return{stream:r,error:a,isWebcamActive:n,startWebcam:c,stopWebcam:d,capturePhoto:u,setError:l}}({videoRef:t,canvasRef:r}),[T,H]=(0,i.useState)(null),[Y,J]=(0,i.useState)([]),[B,K]=(0,i.useState)(0),[Q,X]=(0,i.useState)({}),[ee,et]=(0,i.useState)(!0),[er,es]=(0,i.useState)(!0),[ea,el]=(0,i.useState)(!1),[ei,en]=(0,i.useState)(""),[eo,ec]=(0,i.useState)(""),[ed,eu]=(0,i.useState)(""),[em,ep]=(0,i.useState)([]),ex=Y[B],eh=async()=>{if(!ex||!T)return;let t=F();if(t){let r=Date.now(),s={id:`${ex.id}_${T.projectId}_${r}`,studentId:ex.id,projectId:T.projectId,photoDataUrl:t,fileName:`${ex.className.replace(/\s+/g,"-")}_${ex.lastName}_${ex.firstName}_${(Q[ex.id]?.length||0)+1}.jpg`,timestamp:r};try{await (0,j.Ju)(s),X(e=>({...e,[ex.id]:[...e[ex.id]||[],s]})),e({title:"Photo captur\xe9e !",description:`Photo sauvegard\xe9e pour ${ex.firstName} ${ex.lastName}.`}),B<Y.length-1?K(e=>e+1):e({title:"Tous les \xe9l\xe8ves trait\xe9s !",description:"Vous avez atteint la fin de la liste."})}catch(t){e({variant:"destructive",title:"Erreur sauvegarde photo",description:"Impossible de sauvegarder la photo localement."})}}else e({variant:"destructive",title:"Capture \xe9chou\xe9e",description:"Impossible de capturer la photo depuis la webcam."})},ef=async(t,r)=>{try{await (0,j.JJ)(t),X(e=>({...e,[r]:(e[r]||[]).filter(e=>e.id!==t)})),e({title:"Photo supprim\xe9e",description:"La photo a \xe9t\xe9 enlev\xe9e."})}catch(t){e({variant:"destructive",title:"Erreur suppression photo",description:"Impossible de supprimer la photo."})}},eg=async()=>{if(!T){e({variant:"destructive",title:"Projet non configur\xe9",description:"Veuillez configurer le projet avant d'exporter."});return}let t=await (0,j.Gq)(T.projectId);if(0===t.length&&0===Y.length){e({variant:"destructive",title:"Rien \xe0 exporter",description:"Aucune photo ni \xe9l\xe8ve pour ce projet."});return}let r="";t.length>0?r=t.map(e=>{let t=Y.find(t=>t.id===e.studentId);return t?`${t.className},${t.lastName},${t.firstName},${e.fileName}
`:""}).join(""):Y.length>0&&(r=Y.map(e=>`${e.className},${e.lastName},${e.firstName},
`).join(""));let s="Classe,Nom,Pr\xe9nom,FichierPhoto\n"+r,a=new Blob([`Projet: ${T.projectName}
Date S\xe9ance: ${(0,o.Z)((0,c.Z)(T.sessionDate),"PPP",{locale:d.Z})}

`+s],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(a),i=document.createElement("a");i.href=l,i.setAttribute("download",`export_${T.projectName.replace(/\s+/g,"_")}_${T.sessionDate}.csv`),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l),e({title:"CSV Export\xe9",description:"La liste CSV des photos des \xe9l\xe8ves a \xe9t\xe9 t\xe9l\xe9charg\xe9e."}),t.length>0&&(console.log("Simulating ZIP export of photos:",t.map(e=>e.fileName)),e({title:"Export des photos (Simulation)",description:"La simulation de l'export ZIP est dans la console."}))},ev=async()=>{if(T&&window.confirm(`\xcates-vous s\xfbr de vouloir effacer toutes les photos captur\xe9es pour le projet "${T.projectName}" ? Cette action est irr\xe9versible.`))try{await (0,j.tD)(T.projectId),X({}),ex&&X(e=>({...e,[ex.id]:[]})),e({title:"Donn\xe9es du projet effac\xe9es",description:`Toutes les photos pour "${T.projectName}" ont \xe9t\xe9 supprim\xe9es.`})}catch(t){e({variant:"destructive",title:"Erreur suppression",description:"Impossible de supprimer les photos du projet."})}};if(er)return(0,s.jsxs)("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[s.jsx("header",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b border-border/60 shadow-sm bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:s.jsx(b.Y,{})}),s.jsx("main",{className:"flex-1 flex items-center justify-center",children:s.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement de la configuration du projet..."})})]});if(!T)return(0,s.jsxs)("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-10 flex items-center justify-between p-4 border-b border-border/60 shadow-sm bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[s.jsx(b.Y,{}),s.jsx(l.default,{href:"/",passHref:!0,children:(0,s.jsxs)(u.z,{variant:"default",size:"lg",children:[s.jsx(N.Z,{className:"mr-2 h-5 w-5"})," Configurer le Projet"]})})]}),s.jsx("main",{className:"flex-1 flex items-center justify-center p-6",children:(0,s.jsxs)(R,{variant:"destructive",className:"max-w-md",children:[s.jsx(w,{className:"h-5 w-5"}),s.jsx(D,{children:"Projet non configur\xe9"}),s.jsx(M,{children:"Veuillez configurer un nom de projet et une date de s\xe9ance avant de prendre des photos."})]})})]});let ej=!!T;return(0,s.jsxs)("div",{className:"flex h-screen flex-col bg-background text-foreground",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-50 flex flex-wrap items-center justify-between gap-2 p-4 border-b border-border/60 shadow-sm bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[s.jsx(b.Y,{}),T&&s.jsx("div",{className:"text-sm text-muted-foreground text-center order-last lg:order-none lg:absolute lg:left-1/2 lg:-translate-x-1/2",children:(0,s.jsxs)("p",{className:"truncate",children:[s.jsx("span",{className:"font-semibold text-primary",children:T.projectName})," - S\xe9ance du ",(0,o.Z)((0,c.Z)(T.sessionDate),"PPP",{locale:d.Z})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(l.default,{href:"/",passHref:!0,children:(0,s.jsxs)(u.z,{variant:"outline",size:"lg",className:"bg-card hover:bg-muted","aria-label":"Aller \xe0 la gestion de projet",children:[s.jsx(N.Z,{className:"mr-2 h-5 w-5"})," Projets"]})}),(0,s.jsxs)(u.z,{variant:"outline",size:"lg",onClick:()=>{en(""),ec(""),eu(em[0]?.name||""),el(!0)},disabled:!ej,className:"bg-card hover:bg-muted","aria-label":"Ajouter un \xe9l\xe8ve manuellement",children:[s.jsx(k,{className:"mr-2 h-5 w-5"})," Ajouter \xc9l\xe8ve"]}),(0,s.jsxs)(u.z,{variant:"outline",size:"lg",onClick:()=>y.current?.click(),disabled:!ej,className:"bg-card hover:bg-muted","aria-label":"Import CSV \xc9l\xe8ves",children:[s.jsx(C.Z,{className:"mr-2 h-5 w-5"})," Importer CSV \xc9l\xe8ves"]}),s.jsx(x.I,{type:"file",accept:".csv",ref:y,onChange:t=>{if(!T){e({variant:"destructive",title:"Projet non configur\xe9",description:"Veuillez s\xe9lectionner un projet avant d'importer des \xe9l\xe8ves."});return}let r=t.target.files?.[0];if(r){let t=new FileReader;t.onload=t=>{let r=t.target?.result;if(!r){e({variant:"destructive",title:"Fichier vide",description:"Le fichier CSV s\xe9lectionn\xe9 est vide."});return}try{let t=r.split(/\r\n|\n/).filter(e=>""!==e.trim());if(t.length<=1){e({variant:"destructive",title:"Format CSV incorrect",description:"Le fichier CSV doit contenir un en-t\xeate et au moins une ligne de donn\xe9es."});return}let s=t[0].split(",").map(e=>e.trim().toLowerCase()),a=s.indexOf("pr\xe9nom"),l=s.indexOf("nom"),i=s.indexOf("classe");if(-1===a||-1===l||-1===i){e({variant:"destructive",title:"En-t\xeates CSV manquants",description:"Le CSV doit contenir les colonnes: Pr\xe9nom, Nom, Classe."});return}let n=t.slice(1).map((e,t)=>{let r=e.split(",").map(e=>e.trim());return{id:`student_${T.projectId}_${Date.now()}_${t}`,firstName:r[a]||`Pr\xe9nomInconnu${t}`,lastName:r[l]||`NomInconnu${t}`,className:r[i]||"ClasseInconnue"}});n.length>0?(J(n),K(0),localStorage.setItem(`${q}${T.projectId}`,JSON.stringify(n)),e({title:"\xc9l\xe8ves import\xe9s",description:`${n.length} \xe9l\xe8ves import\xe9s avec succ\xe8s pour le projet ${T.projectName}.`})):e({variant:"destructive",title:"Aucun \xe9l\xe8ve import\xe9",description:"Aucun \xe9l\xe8ve n'a \xe9t\xe9 trouv\xe9 dans le fichier CSV."})}catch(t){console.error("Error parsing CSV:",t),e({variant:"destructive",title:"Erreur de parsing CSV",description:"Impossible de lire le fichier CSV. V\xe9rifiez son format."})}},t.readAsText(r)}y.current&&(y.current.value="")},className:"hidden"}),(0,s.jsxs)(u.z,{variant:"outline",size:"lg",onClick:eg,disabled:!ej,className:"bg-card hover:bg-muted","aria-label":"Export Photos and CSV",children:[s.jsx(P.Z,{className:"mr-2 h-5 w-5"})," Export"]}),(0,s.jsxs)(u.z,{variant:W?"destructive":"default",size:"lg",onClick:W?L:()=>{G(null),U()},disabled:!ej,"aria-label":W?"Stop Webcam":"Start Webcam",children:[W?s.jsx(S,{className:"mr-2 h-5 w-5"}):s.jsx(z,{className:"mr-2 h-5 w-5"}),W?"Stop Cam":"Start Cam"]})]})]}),(0,s.jsxs)("main",{className:"flex-1 flex flex-col lg:flex-row p-4 gap-4 overflow-hidden",children:[(0,s.jsxs)(m.Zb,{className:(0,V.cn)("lg:w-1/3 flex flex-col shadow-lg bg-card",!ej&&"opacity-50 pointer-events-none"),children:[s.jsx(m.Ol,{children:s.jsx(m.ll,{className:"text-xl",children:"\xc9l\xe8ve Actuel"})}),(0,s.jsxs)(m.aY,{className:"flex-1 flex flex-col items-center justify-center text-center p-6",children:[Y.length>0&&ex?(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:ex.className}),s.jsx("p",{className:"text-5xl md:text-6xl font-bold my-4 text-primary truncate max-w-full px-2",title:`${ex.firstName} ${ex.lastName}`,children:ex.firstName}),s.jsx("p",{className:"text-5xl md:text-6xl font-bold mb-4 text-primary truncate max-w-full px-2",children:ex.lastName}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[B+1," / ",Y.length]})]}):s.jsx("p",{className:"text-muted-foreground",children:"Aucun \xe9l\xe8ve disponible. Veuillez importer ou ajouter des \xe9l\xe8ves."}),ee&&Y.length>0&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Chargement des photos de l'\xe9l\xe8ve..."})]}),(0,s.jsxs)(m.eW,{className:"flex justify-between p-4 border-t border-border/60",children:[(0,s.jsxs)(u.z,{variant:"outline",size:"lg",onClick:()=>{B>0?K(e=>e-1):e({title:"D\xe9but de la liste",description:"Vous \xeates au premier \xe9l\xe8ve."})},disabled:0===B||!ej||0===Y.length,className:"bg-background hover:bg-muted","aria-label":"Previous Student",children:[s.jsx($.Z,{className:"mr-2 h-5 w-5"})," Pr\xe9c."]}),(0,s.jsxs)(u.z,{variant:"outline",size:"lg",onClick:()=>{B<Y.length-1?K(e=>e+1):e({title:"Fin de la liste",description:"Vous \xeates au dernier \xe9l\xe8ve."})},disabled:B===Y.length-1||!ej||0===Y.length,className:"bg-background hover:bg-muted","aria-label":"Next Student",children:["Suiv. ",s.jsx(_,{className:"ml-2 h-5 w-5"})]})]})]}),(0,s.jsxs)(m.Zb,{className:(0,V.cn)("lg:w-2/3 flex flex-col shadow-lg overflow-hidden bg-card",!ej&&"opacity-50 pointer-events-none"),children:[s.jsx(m.Ol,{children:s.jsx(m.ll,{className:"text-xl",children:"Capture Photo"})}),(0,s.jsxs)(m.aY,{className:"flex-1 flex flex-col items-center justify-center relative p-2 md:p-4",children:[(0,s.jsxs)("div",{className:"w-full aspect-video bg-muted rounded-md shadow-inner overflow-hidden relative",children:[s.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-contain"}),(!W||O)&&ej&&(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-muted/80 backdrop-blur-sm rounded-md p-4 text-center",children:[s.jsx(A.Z,{className:"w-16 h-16 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:O?"Erreur Webcam":"Webcam inactive."}),O&&(0,s.jsxs)("p",{className:"text-destructive text-sm mt-2 flex items-center justify-center",children:[s.jsx(w,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{className:"break-words max-w-xs",children:O.replace("Error accessing webcam: ","").replace(" Please ensure permissions are granted.","")})]}),s.jsx(u.z,{onClick:()=>{G(null),U()},className:"mt-4",size:"lg","aria-label":"Activer la webcam",children:W&&O?"R\xe9essayer Webcam":"Activer Webcam"})]})]}),!ej&&(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-muted/90 backdrop-blur-sm rounded-md shadow-inner p-4 text-center",children:[s.jsx(Z.Z,{className:"w-16 h-16 text-primary mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"Projet non configur\xe9"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Veuillez configurer le projet pour activer la capture."}),s.jsx(l.default,{href:"/",passHref:!0,children:s.jsx(u.z,{size:"lg",children:"Configurer le Projet"})})]}),s.jsx("canvas",{ref:r,className:"hidden"})]}),(0,s.jsxs)(m.eW,{className:"flex flex-col p-4 border-t border-border/60",children:[(0,s.jsxs)(u.z,{size:"lg",className:"w-full mb-4 bg-primary hover:bg-primary/90 text-primary-foreground py-6 text-xl",onClick:eh,disabled:!W||!ex||!ej||ee||0===Y.length,"aria-label":"Capture Photo",children:[s.jsx(A.Z,{className:"mr-2 h-6 w-6"})," Capturer Photo"]}),ex&&(Q[ex.id]?.length??0)>0&&(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium mb-2 text-muted-foreground",children:["Captures pour ",ex.firstName,":"]}),s.jsx(p.x,{className:"h-24 w-full",children:s.jsx("div",{className:"flex gap-2 pb-2",children:(Q[ex.id]||[]).map(e=>(0,s.jsxs)("div",{className:"relative group shrink-0",children:[s.jsx(a.default,{src:e.photoDataUrl,alt:`Photo pour ${ex.firstName}`,width:80,height:60,className:"rounded-md object-cover w-20 h-[60px] border border-border/60"}),s.jsx(u.z,{variant:"destructive",size:"icon",className:"absolute top-0 right-0 w-6 h-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>ef(e.id,ex.id),"aria-label":"Delete Photo",disabled:!ej,children:s.jsx(I.Z,{className:"w-3 h-3"})})]},e.id))})})]})]})]})]}),s.jsx("footer",{className:"p-2 text-center border-t border-border/60",children:(0,s.jsxs)(u.z,{variant:"link",size:"sm",onClick:ev,className:"text-destructive hover:text-destructive/80",disabled:!ej,children:[s.jsx(I.Z,{className:"mr-1 h-3 w-3"})," Effacer les photos du projet actuel"]})}),s.jsx(f.Vq,{open:ea,onOpenChange:el,children:(0,s.jsxs)(f.cZ,{className:"sm:max-w-md",children:[s.jsx(f.fK,{children:s.jsx(f.$N,{children:"Ajouter un nouvel \xe9l\xe8ve"})}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(h._,{htmlFor:"firstName",className:"text-right",children:"Pr\xe9nom"}),s.jsx(x.I,{id:"firstName",value:ei,onChange:e=>en(e.target.value),className:"col-span-3 bg-background",placeholder:"Pr\xe9nom de l'\xe9l\xe8ve"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(h._,{htmlFor:"lastName",className:"text-right",children:"Nom"}),s.jsx(x.I,{id:"lastName",value:eo,onChange:e=>ec(e.target.value),className:"col-span-3 bg-background",placeholder:"Nom de l'\xe9l\xe8ve"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(h._,{htmlFor:"className",className:"text-right",children:"Classe"}),em.length>0?(0,s.jsxs)(g.Ph,{value:ed,onValueChange:eu,children:[s.jsx(g.i4,{className:"col-span-3 bg-background",children:s.jsx(g.ki,{placeholder:"S\xe9lectionnez une classe"})}),s.jsx(g.Bw,{children:em.map(e=>s.jsx(g.Ql,{value:e.name,children:e.name},e.id))})]}):s.jsx(x.I,{id:"className",value:ed,onChange:e=>eu(e.target.value),className:"col-span-3 bg-background",placeholder:"Ex: CP A (Aucune classe configur\xe9e)"})]})]}),(0,s.jsxs)(f.cN,{children:[s.jsx(f.GG,{asChild:!0,children:s.jsx(u.z,{variant:"outline",children:"Annuler"})}),s.jsx(u.z,{onClick:()=>{if(!T){e({variant:"destructive",title:"Erreur Projet",description:"Aucun projet actif pour ajouter cet \xe9l\xe8ve."});return}if(!ei.trim()||!eo.trim()||!ed.trim()){e({variant:"destructive",title:"Champs manquants",description:"Veuillez remplir Pr\xe9nom, Nom et Classe."});return}let t={id:`student_${T.projectId}_${Date.now()}_manual_${Y.length}`,firstName:ei.trim(),lastName:eo.trim(),className:ed.trim()},r=[...Y,t];J(r),localStorage.setItem(`${q}${T.projectId}`,JSON.stringify(r)),e({title:"\xc9l\xe8ve ajout\xe9",description:`${t.firstName} ${t.lastName} a \xe9t\xe9 ajout\xe9 \xe0 la liste.`}),el(!1)},children:"Sauvegarder \xc9l\xe8ve"})]})]})})]})}},9752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>n,Zb:()=>i,aY:()=>c,eW:()=>d,ll:()=>o});var s=r(326),a=r(7577),l=r(1223);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle",a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter"},7525:(e,t,r)=>{"use strict";r.d(t,{x:()=>n});var s=r(326),a=r(7577),l=r(6999),i=r(1223);let n=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(l.fC,{ref:a,className:(0,i.cn)("relative overflow-hidden",e),...r,children:[s.jsx(l.l_,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(o,{}),s.jsx(l.Ns,{})]}));n.displayName=l.fC.displayName;let o=a.forwardRef(({className:e,orientation:t="vertical",...r},a)=>s.jsx(l.gb,{ref:a,orientation:t,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(l.q4,{className:"relative flex-1 rounded-full bg-border"})}));o.displayName=l.gb.displayName},8203:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\julie\Desktop\test_PWA\src\app\capture\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,343,621,434,272,64,590],()=>r(6983));module.exports=s})();